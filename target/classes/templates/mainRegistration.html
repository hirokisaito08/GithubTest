<!DOCTYPE HTML>
<html lang="ja" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">

</head>
<body>

<table>
  <caption>現在の収支表</caption>
  <input type="button" value ="更新" onclick="kousin()">
  <tr style="background:#ccccff">
    <th width="180">項目</th>
    <th width="180">金額</th>

  </tr>
  <tr>
    <td>残高</td>
    <td><span th:text="${data_sum}"id="income"></span></td>

  </tr>
  <tr>
    <td>支出</td>
    <td><span th:text="${data_sum1}"id="out"></span></td>
  </tr>
  <tr>
    <td>貯金</td>
    <td><span th:text="${data_sum2}"id="acc"></span></td>
  </tr>
</table>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>
<div class ="chart">
<canvas id="myChart" ></canvas></div>



<script type="text/javascript">

var ctx = document.getElementById("myChart").getContext('2d');
var out = document.getElementById("out").innerText;
var income = document.getElementById("income").innerText;
var acc= document.getElementById("acc").innerText;


console.log(document.getElementById("acc").innerText);

var out1 = Number(out);
var income1 = Number(income);
var out2=Number(income-out-acc);

var acc1 = Number(acc);

document.getElementById("income").innerText=out2;
document.getElementById("out").innerText=out1;
document.getElementById("acc").innerText=acc1;

var myChart = new Chart(ctx, {

  type: 'pie',
  data: {
    labels: ["残高", "支出", "貯金"],
    datasets: [{
      backgroundColor: [
        "#2ecc71",
        "#3498db",
        "#95a5a6"
      ],
      data: [out2,out1,acc1]
    }]
  }





});

function kousin(){
	  location.reload();
	}


</script>
<style type="text/css">

canvas{
  display: flex;
  justify-content:cenetr;
  align-items:center;
  margin:5 auto;
}
body {overflow-y:hidden;}
</style>


</body>
</html>